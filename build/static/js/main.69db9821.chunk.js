(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{406:function(e,t,a){e.exports=a(611)},411:function(e,t,a){},412:function(e,t,a){},611:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),o=a.n(l),c=(a(411),a(111)),i=a(55),s=a(23),u=a(24),m=a(26),d=a(25),h=a(27),p=(a(412),a(211)),f=a(292),E=a(33),g=a(88),b=a(30),v=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(p.a,{fixed:"top",color:"blue"},r.a.createElement(p.a.Item,{header:!0,as:b.b,to:"/"},"Brewers Market"),e?r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,null,r.a.createElement(f.a,{placeholder:"Search...",action:{icon:"search"},value:this.props.search,onChange:this.props.setSearch})),r.a.createElement(p.a.Item,{as:b.b,to:"/cart"},r.a.createElement(E.a,{name:"cart"}),r.a.createElement("strong",null,Object.keys(this.props.cart).length)),r.a.createElement(g.a,{item:!0,text:"".concat(e.first_name," ").concat(e.last_name)},r.a.createElement(g.a.Menu,null,r.a.createElement(g.a.Item,{as:b.b,to:"/profile"},"My Details"),r.a.createElement(g.a.Item,{as:b.b,to:"/orders"},"Orders"),r.a.createElement(g.a.Item,{as:b.b,to:"/help"},"Help"),r.a.createElement(g.a.Item,{onClick:this.props.signOut,as:b.b,to:"/"},"Sign out")))):r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,{as:b.b,to:"/signin"},"Sign In")))}}]),t}(r.a.Component),C=a(363),y=a(77),O="http://lit-taiga-20073.herokuapp.com/api/v1/",j=["Amber","Barleywine","Belgian","Blonde","Brown","English Ale","Fruit","Golden","IPA","Lager","Mild","Pale","Porter","Red Ale","Saison","Sour","Stout","Wheat"],w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:"home",breweries:[]},a.handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.breweries=function(){return a.state.breweries.filter(function(e){return e.products.length>0}).map(function(e){return{text:e.name,value:e.name}})},a.styles=function(){return j.map(function(e){return{text:e,value:e}})},a.setFilterButton=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.setState({activeItem:e||"home"}),a.props.setFilter(e,t)},a.setFilterDropdown=function(e,t){var n=t.name,r=t.value;a.setState({activeItem:n}),a.props.setFilter(n,r)},a.stickTopMenu=function(){return a.setState({menuFixed:!0})},a.unStickTopMenu=function(){return a.setState({menuFixed:!1})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(O+"breweries").then(function(e){return e.json()}).then(function(t){return e.setState({breweries:t})})}},{key:"render",value:function(){var e=this,t=this.state.activeItem;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:"100%",height:"14em",overflow:"hidden",borderRadius:"5px",boxShadow:"1px 1px 2px rgba(0,0,0,0.2)"}},r.a.createElement(y.a,{src:"https://stuartsewell.dev/hero2.jpeg",style:{objectFit:"cover",height:"14em",width:"100%"}})),r.a.createElement("div",null,r.a.createElement(p.a,{pointing:!0,secondary:!0},r.a.createElement(p.a.Item,{as:b.b,to:"/",name:"home",active:"home"===t,onClick:function(){return e.setFilterButton(null)}}),r.a.createElement(p.a.Item,{name:"all products",active:"all products"===t,onClick:function(){return e.setFilterButton("all products","All Products")}}),r.a.createElement(g.a,{item:!0,name:"brewery",onChange:this.setFilterDropdown,text:"Filter by Brewery",options:this.breweries()}),r.a.createElement(g.a,{item:!0,name:"style",onChange:this.setFilterDropdown,text:"Filter by Style",options:this.styles()}))))}}]),t}(r.a.Component),S=a(340),k=a(223),I=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.beer,a=t.id,n=t.brewery,l=t.name,o=t.style,c=t.image_url;return r.a.createElement(k.a,{as:b.b,to:"/product/".concat(a),onClick:function(){return e.props.fetchProduct(a)}},r.a.createElement(y.a,{src:c}),r.a.createElement(k.a.Content,null,r.a.createElement(S.a,null,l),r.a.createElement("p",null,n.name)),r.a.createElement(k.a.Content,{extra:!0},o))}}]),t}(r.a.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,this.props.title),this.props.products.length>0?r.a.createElement(k.a.Group,{itemsPerRow:5},this.props.products.map(function(t){return r.a.createElement(I,{key:t.id,beer:t,fetchProduct:e.props.fetchProduct})})):r.a.createElement("div",null,"No results found."))}}]),t}(r.a.Component),F=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{setFilter:this.props.setFilter}),this.props.filter?r.a.createElement(x,{title:this.props.filter,products:this.props.products,fetchProduct:function(){}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{title:"Trending Products",products:this.props.products.slice(0,5),fetchProduct:function(){}}),r.a.createElement(x,{title:"Latest Products",products:this.props.products.reverse().slice(0,5),fetchProduct:function(){}})))}}]),t}(r.a.Component),P=a(225),T=a(342),_=a(114),A=a(343),D=a(34),H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleOnChange=function(e){return a.setState(Object(i.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){a.props.signInSubmit(a.state)},a.signInSubmit=function(){fetch(O+"signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then(function(e){return e.json()}).then(function(e){e.error?D.b.error("Signin Failed! Please try again.",{containerId:"messages"}):(localStorage.setItem("user",e.token),a.props.getUser(),a.props.history.push("/"))})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{textAlign:"center"},r.a.createElement(P.a.Column,{style:{maxWidth:450,paddingTop:"8em"}},r.a.createElement(S.a,{as:"h2",textAlign:"center"},"Sign in to your account"),r.a.createElement(T.a,{size:"large",onSubmit:this.signInSubmit},r.a.createElement(T.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:this.handleOnChange,value:this.state.email}),r.a.createElement(T.a.Input,{fluid:!0,icon:"lock",name:"password",iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleOnChange,value:this.state.password}),this.state.email&&this.state.password?r.a.createElement(_.a,{fluid:!0,size:"large",content:"Login",positive:!0}):r.a.createElement(_.a,{fluid:!0,size:"large",content:"Login",disabled:!0})),r.a.createElement(A.a,null,"New here? ",r.a.createElement(b.b,{to:"/signup"},"Sign Up")))))}}]),t}(r.a.Component),M=a(248),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",email:"",dob:"",password:"",password_confirm:""},a.handleOnChange=function(e){a.setState(Object(i.a)({},e.target.name,e.target.value))},a.handleDateChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(i.a)({},n,r))},a.handleSubmit=function(e){var t=!0,n=!0;a.state.password!==a.state.password_confirm?(D.b.error("Passwords do not match.",{containerId:"errors"}),t=!0):t=!1,a.ageCheck(a.state.dob)<18?(D.b.error("You must be at least 18.",{containerId:"errors"}),n=!0):n=!1,n||t||a.signUpSubmit()},a.signUpSubmit=function(){fetch(O+"users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then(function(e){return e.json()}).then(function(e){e.error?e.error.map(function(e){return D.b.error(e,{containerId:"messages"})}):(localStorage.setItem("user",e.token),a.props.getUser(),a.props.history.push("/"))})},a.formValidation=function(){var e=a.state,t=e.first_name,n=e.last_name,r=e.email,l=e.dob,o=e.password,c=e.password_confirm;return!!(t&&n&&r&&l&&o&&c)},a.ageCheck=function(e){var t=new Date,a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear(),l=e.split("-"),o=r-l[2],c=n-l[1];return(c<0||0===c&&a<l[0])&&o--,o},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{textAlign:"center"},r.a.createElement(P.a.Column,{style:{maxWidth:450,paddingTop:"8em"}},r.a.createElement(S.a,{as:"h2",textAlign:"center"},"Create a new account"),r.a.createElement(T.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"user",iconPosition:"left",placeholder:"First Name",name:"first_name",onChange:this.handleOnChange,value:this.state.first_name}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"user",iconPosition:"left",placeholder:"Last Name",name:"last_name",onChange:this.handleOnChange,value:this.state.last_name}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"mail",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:this.handleOnChange,value:this.state.email}),r.a.createElement(M.DateInput,{name:"dob",placeholder:"Date of Birth",value:this.state.dob,iconPosition:"left",onChange:this.handleDateChange}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"lock",name:"password",iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleOnChange,value:this.state.password}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"lock",name:"password_confirm",iconPosition:"left",placeholder:"Confirm Password",type:"password",onChange:this.handleOnChange,value:this.state.password_confirm}),this.formValidation()?r.a.createElement(_.a,{fluid:!0,size:"large",content:"Create account",positive:!0}):r.a.createElement(_.a,{fluid:!0,size:"large",content:"Create account",disabled:!0})))))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",tel:"",address_line_1:"",address_line_2:"",city:"",postcode:"",dob:"",email:""},a.updateDetails=function(){fetch(O+"users/".concat(a.state.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then(function(e){return e.json()}).then(function(e){e.error?e.error.map(function(e){return D.b.error(e,{containerId:"messages"})}):(D.b.success("Details updated.",{containerId:"messages"}),a.setState({user:e}))})},a.handleOnChange=function(e){return a.setState(Object(i.a)({},e.target.name,e.target.value))},a.formValidation=function(){var e=a.state,t=e.first_name,n=e.last_name,r=e.tel,l=e.address_line_1,o=e.address_line_2,c=e.city,i=e.postcode;return!!(t&&n&&r&&l&&o&&c&&i)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("user");t?fetch(O+"auto_signin",{headers:{Authorization:t}}).then(function(e){return e.json()}).then(function(t){t.error||e.setState(Object(c.a)({},t.user))}):this.props.history.push("/signin")}},{key:"render",value:function(){var e=this.state,t=e.first_name,a=e.last_name,n=e.tel,l=e.address_line_1,o=e.address_line_2,c=e.city,i=e.postcode,s=e.email,u=e.dob;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{textAlign:"center"},r.a.createElement(P.a.Column,{style:{maxWidth:450,paddingTop:"8em"}},r.a.createElement(S.a,{as:"h2",textAlign:"center"},"My Details"),r.a.createElement(T.a,{size:"large",onSubmit:this.updateDetails},r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"user",iconPosition:"left",placeholder:"First Name",name:"first_name",onChange:this.handleOnChange,value:t}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"user",iconPosition:"left",placeholder:"Last Name",name:"last_name",onChange:this.handleOnChange,value:a}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,disabled:!0,icon:"mail",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:this.handleOnChange,value:s}),r.a.createElement(M.DateInput,{disabled:!0,value:u,iconPosition:"left"}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"phone",iconPosition:"left",placeholder:"Phone No.",name:"tel",onChange:this.handleOnChange,value:n}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"address book",iconPosition:"left",placeholder:"Address Line 1",name:"address_line_1",onChange:this.handleOnChange,value:l}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"address book",iconPosition:"left",placeholder:"Address Line 2",name:"address_line_2",onChange:this.handleOnChange,value:o}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"address book",iconPosition:"left",placeholder:"City",name:"city",onChange:this.handleOnChange,value:c}),r.a.createElement(T.a.Input,{fluid:!0,required:!0,icon:"address book",iconPosition:"left",placeholder:"Postcode",name:"postcode",onChange:this.handleOnChange,value:i}),this.formValidation()?r.a.createElement(_.a,{fluid:!0,size:"large",content:"Update Details",positive:!0}):r.a.createElement(_.a,{fluid:!0,size:"large",content:"Update Details",disabled:!0})))))}}]),t}(r.a.Component),q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={products:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(O+"/products").then(function(e){return e.json()}).then(function(t){return e.setState({products:t})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null),r.a.createElement(S.a,null,"All Products"),this.state.products.length>0?r.a.createElement(k.a.Group,{itemsPerRow:5},this.state.products.map(function(e){return r.a.createElement(I,{key:e.id,beer:e})})):r.a.createElement("div",null,"No results found."))}}]),t}(r.a.Component),L=a(364),B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={id:0,name:"",description:"",abv:0,volume:0,style:"",packaging:"",price:0,stock:0,image_url:"",brewery:{}},a.fetchProduct=function(e){fetch(O+"products/".concat(e)).then(function(e){return e.json()}).then(function(e){return a.setState(Object(c.a)({},e))})},a.moreProducts=function(){return a.props.products.filter(function(e){return e.brewery.id===a.state.brewery.id&&e.id!==a.state.id})},a.handleAddToCart=function(){a.props.cart[a.state.id]>=a.state.stock?D.b.error("Stock level exceeded.",{containerId:"messages"}):(a.props.addToCart(a.state.id),D.b.success("Added to cart.",{containerId:"messages"}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchProduct(this.props.match.params.id)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.abv,l=e.volume,o=e.style,c=e.packaging,i=e.price,s=e.image_url,u=e.brewery;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{fluid:!0},r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:8},r.a.createElement(y.a,{size:"large",src:s,style:{padding:"1em"}})),r.a.createElement(P.a.Column,{width:8},r.a.createElement(k.a.Header,{style:{fontSize:"2.5em",padding:"1em"}},t),r.a.createElement(k.a.Description,{style:{padding:"1em"}},r.a.createElement("div",null,r.a.createElement(S.a,null,u.name),u.location),r.a.createElement("br",null),r.a.createElement("p",null,a)),r.a.createElement(k.a.Content,null,r.a.createElement(L.a,{style:{padding:"1em"}},r.a.createElement(L.a.Item,{style:{lineHeight:"2"}},r.a.createElement("strong",null,"ABV: ")," ",n.toFixed(1),"%"),r.a.createElement(L.a.Item,{style:{lineHeight:"2"}},r.a.createElement("strong",null,"Volume: ")," ",l,"ml"),r.a.createElement(L.a.Item,{style:{lineHeight:"2"}},r.a.createElement("strong",null,"Packaging: ")," ",c),r.a.createElement(L.a.Item,{style:{lineHeight:"2"}},r.a.createElement("strong",null,"Style: ")," ",o),r.a.createElement(L.a.Item,{style:{lineHeight:"2"}},r.a.createElement("strong",null,"Price: ")," \xa3",i.toFixed(2))))))),r.a.createElement(k.a.Content,{extra:!0},r.a.createElement(_.a,{positive:!0,floated:"right",onClick:this.handleAddToCart},"Add to Cart"))),r.a.createElement(x,{title:"More from ".concat(u.name),products:this.moreProducts().slice(0,5),fetchProduct:this.fetchProduct}))}}]),t}(r.a.Component),R=(a(604),a(113)),U=a(362),J=a(344),W=a(140),G=a(301),V=a.n(G),Y=a(401),K=a(244),Q=a(365),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={complete:!1,data:{},btnText:"Complete",btnDisable:!1},a.submit=a.submit.bind(Object(K.a)(a)),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"submit",value:function(){var e=Object(Y.a)(V.a.mark(function e(t){var a,n,l,o,c,i,s,u=this;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.data,n=a.error,l=a.complete,!n&&l){e.next=6;break}return o=null,o=n?n.message:"Form not complete",D.b.error(o,{containerId:"messages"}),e.abrupt("return");case 6:return this.setState({btnText:r.a.createElement(Q.a,{active:!0,inline:!0,size:"small"}),btnDisable:!0}),e.next=9,this.props.stripe.createToken({name:"Name"});case 9:return c=e.sent,i=c.token,e.next=13,fetch("/charge",{method:"POST",headers:{"Content-Type":"text/plain"},body:i.id});case 13:e.sent.ok&&(s=JSON.parse(localStorage.getItem("cart")),fetch(O+"orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:s,user_id:this.props.user.id,order_total:this.props.total})}).then(function(e){return e.json()}).then(function(e){e.error?D.b.error(e.error,{containerId:"messages"}):(localStorage.removeItem("cart"),u.props.clearCart(),u.props.history.push("/order/".concat(e.id)))}));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.complete?r.a.createElement("h1",null,"Purchase Complete"):r.a.createElement("div",{className:"checkout"},r.a.createElement(W.CardElement,{onChange:function(t){e.setState({data:t})}}),r.a.createElement(_.a,{onClick:this.submit,disabled:this.state.btnDisable,positive:!0,floated:"right",style:{marginBottom:"20px"}},this.state.btnText))}}]),t}(r.a.Component),Z=Object(W.injectStripe)(X),$=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(W.StripeProvider,{apiKey:"pk_test_TYooMQauvdEDq54NiTphI7jx"},r.a.createElement("div",{className:"example"},r.a.createElement(W.Elements,null,r.a.createElement(Z,{cart:this.props.cart,clearCart:this.props.clearCart,user:this.props.user,history:this.props.history,total:this.props.total}))))}}]),t}(r.a.Component),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={checkout:!1,products:[],cartItems:[]},a.cartToState=function(){var e=[];fetch(O+"products").then(function(e){return e.json()}).then(function(t){e=t,a.setState({products:e,cartItems:a.newCartItems(e)})})},a.removeFromCart=function(e){a.props.removeFromCart(e),a.cartToState()},a.newCartItems=function(e){return e.filter(function(e){return Object.keys(a.props.cart).includes(e.id.toString())}).map(function(e){return Object.assign({},e,{qty:a.props.cart[e.id],total:e.price*a.props.cart[e.id]})})},a.sumTotal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return a.state.cartItems.map(function(t){return e+=t.total}),parseFloat(e).toFixed(2)},a.checkoutClick=function(){a.setState({checkout:!0})},a.updateCart=function(e,t){if("add"===e){var n=a.state.products.find(function(e){return e.id===t});console.log(a.props.cart[t],n.stock),a.props.cart[t]<n.stock?a.props.addToCart(t):D.b.error("Stock level reached.",{containerId:"messages"})}"remove"===e&&a.props.removeFromCart(t),"removeline"===e&&a.props.removeLineFromCart(t),a.cartToState()},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.cartToState()}},{key:"render",value:function(){var e=this;return this.state.cartItems.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{textAlign:"center",size:"huge"},"My Cart"),r.a.createElement(U.a,{singleLine:!0,striped:!0,fixed:!0},r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Row,null,r.a.createElement(U.a.HeaderCell,null,"Item"),r.a.createElement(U.a.HeaderCell,{width:2},"Quantity"),r.a.createElement(U.a.HeaderCell,{width:2},"Price"),r.a.createElement(U.a.HeaderCell,{width:2}))),r.a.createElement(U.a.Body,null,this.state.cartItems.map(function(t){return r.a.createElement(U.a.Row,{key:t.id},r.a.createElement(U.a.Cell,null,r.a.createElement(b.b,{to:"/product/".concat(t.id)},t.name)," ",r.a.createElement("em",null,"(",t.brewery.name,")")),r.a.createElement(U.a.Cell,null,r.a.createElement(b.b,{to:"#",onClick:function(){return e.updateCart("remove",t.id)}}," ",r.a.createElement(E.a,{name:"minus"})," "),r.a.createElement("span",{style:{fontSize:"1.2em"}},t.qty),r.a.createElement(b.b,{to:"#",onClick:function(){return e.updateCart("add",t.id)}}," ",r.a.createElement(E.a,{name:"plus"})," ")),r.a.createElement(U.a.Cell,null,"\xa3",t.total.toFixed(2)),r.a.createElement(U.a.Cell,null,r.a.createElement(b.b,{to:"#",style:{color:"red"},onClick:function(){return e.updateCart("removeline",t.id)}},"Remove")))}),r.a.createElement(U.a.Row,null,r.a.createElement(U.a.Cell,null),r.a.createElement(U.a.Cell,null,r.a.createElement("strong",null,"Subtotal")),r.a.createElement(U.a.Cell,null,r.a.createElement("strong",null,"\xa3",this.sumTotal())),r.a.createElement(U.a.Cell,null)),r.a.createElement(U.a.Row,null,r.a.createElement(U.a.Cell,null),r.a.createElement(U.a.Cell,null,"Delivery"),r.a.createElement(U.a.Cell,null,"\xa3",6.99),r.a.createElement(U.a.Cell,null)),r.a.createElement(U.a.Row,null,r.a.createElement(U.a.Cell,null),r.a.createElement(U.a.Cell,null,r.a.createElement("strong",null,"Total")),r.a.createElement(U.a.Cell,null,r.a.createElement("strong",null,"\xa3",this.sumTotal(6.99))),r.a.createElement(U.a.Cell,null))),r.a.createElement(U.a.Footer,{fullWidth:!0},r.a.createElement(U.a.Row,null,r.a.createElement(U.a.HeaderCell,{colSpan:"4"},r.a.createElement(J.a,{trigger:r.a.createElement(_.a,{positive:!0,floated:"right",style:{height:"2.8em"}},"Checkout")},r.a.createElement(J.a.Header,null,"Complete Purchase"),r.a.createElement(J.a.Content,null,r.a.createElement($,{cart:this.state.cartItems,clearCart:this.props.clearCart,user:this.props.user,history:this.props.history,total:this.sumTotal(6.99)}))),r.a.createElement(_.a,{negative:!0,floated:"right",onClick:this.props.clearCart,as:b.b,to:"/",style:{height:"2.8em"}},"Empty Cart")))))):this.state.cartItems.length<1?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{textAlign:"center",size:"huge"},"My Cart"),r.a.createElement("br",null),r.a.createElement(k.a,{fluid:!0},r.a.createElement(k.a.Content,null,r.a.createElement(k.a.Header,null,"Cart is empty."),r.a.createElement(k.a.Description,null,r.a.createElement(b.b,{to:"/"},"Click Here ")," to continue shopping.")))):void 0}}]),t}(r.a.Component),te=a(240),ae=a(170),ne=a(242),re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={order:{}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(O+"orders/".concat(this.props.match.params.id)).then(function(e){return e.json()}).then(function(t){return e.setState({order:t})})}},{key:"render",value:function(){var e=this.state.order,t=e.total,a=e.delivery,n=e.status,l=e.products,o=e.user;return this.state.order.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(te.a.Group,{fluid:!0},r.a.createElement(te.a,{active:"open"===n},r.a.createElement(E.a,{name:"thumbs up"}),r.a.createElement(te.a.Content,null,r.a.createElement(te.a.Title,null,"Order Placed"))),r.a.createElement(te.a,{disabled:!0},r.a.createElement(E.a,{name:"box"}),r.a.createElement(te.a.Content,null,r.a.createElement(te.a.Title,null,"Preparing"))),r.a.createElement(te.a,{disabled:!0},r.a.createElement(E.a,{name:"truck"}),r.a.createElement(te.a.Content,null,r.a.createElement(te.a.Title,null,"Shipping"))),r.a.createElement(te.a,{disabled:!0},r.a.createElement(E.a,{name:"check"}),r.a.createElement(te.a.Content,null,r.a.createElement(te.a.Title,null,"Complete")))),r.a.createElement(ae.a,null,r.a.createElement(ne.a.Group,null,r.a.createElement(ne.a,null,r.a.createElement(ne.a.Content,null,r.a.createElement(ne.a.Header,null,"Order Details"),r.a.createElement(ne.a.Description,null,r.a.createElement(P.a,{style:{borderBottom:"1px solid rgba(0,0,0,0.1"}},r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:8},"Delivery Address: ",r.a.createElement("br",null),o.address_line_1,r.a.createElement("br",null),o.address_line_2,r.a.createElement("br",null),o.city,r.a.createElement("br",null),o.postcode),r.a.createElement(P.a.Column,{width:8},r.a.createElement(ne.a,null,r.a.createElement(ne.a.Content,null,r.a.createElement(ne.a.Description,null,r.a.createElement("p",null,"Subtotal: \xa3",(t-a).toFixed(2)),r.a.createElement("p",null,"Shipping: \xa3",a.toFixed(2))),r.a.createElement(S.a,null,"Order Total: \xa3",t.toFixed(2)))))))))),l.map(function(e){return r.a.createElement(ne.a,{style:{paddingTop:"2em"}},r.a.createElement(ne.a.Image,{size:"tiny",src:e.image_url}),r.a.createElement(ne.a.Content,null,r.a.createElement(ne.a.Header,null,e.name),r.a.createElement(ne.a.Meta,null,e.brewery_name),r.a.createElement(ne.a.Description,null,"Amount: ",e.qty,r.a.createElement("br",null),"Price: \xa3",(e.price*e.qty).toFixed(2))))}))),r.a.createElement(_.a,{as:b.b,to:"/orders",basic:!0,inverted:!0},"Back to Orders")):r.a.createElement("div",null)}}]),t}(r.a.Component),le=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(O+"users/".concat(this.props.user.id)).then(function(e){return e.json()}).then(function(t){return e.setState({orders:t.orders})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{textAlign:"center",size:"huge"},"My Orders"),r.a.createElement(U.a,null,r.a.createElement(U.a.Header,null,r.a.createElement(U.a.Row,null,r.a.createElement(U.a.HeaderCell,null,"Order Date"),r.a.createElement(U.a.HeaderCell,null,"Order Number"),r.a.createElement(U.a.HeaderCell,{width:2},"Order Total"),r.a.createElement(U.a.HeaderCell,{width:2},"Order Status"),r.a.createElement(U.a.HeaderCell,{width:2}))),r.a.createElement(U.a.Body,null,this.state.orders.map(function(e){return r.a.createElement(U.a.Row,null,r.a.createElement(U.a.Cell,null,"".concat(e.created_at.slice(8,10),"/").concat(e.created_at.slice(5,7),"/").concat(e.created_at.slice(0,4))),r.a.createElement(U.a.Cell,null,e.id),r.a.createElement(U.a.Cell,null,"\xa3",e.total.toFixed(2)),r.a.createElement(U.a.Cell,null,e.status.charAt(0).toUpperCase()+e.status.slice(1,e.status.length)),r.a.createElement(U.a.Cell,null,r.a.createElement(b.b,{to:"/order/".concat(e.id)},"Details")))}))))}}]),t}(r.a.Component),oe=a(366),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.handleClick=function(e,t){var n=t.index,r=a.state.activeIndex===n?-1:n;a.setState({activeIndex:r})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.activeIndex;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{textAlign:"center",size:"huge"},"Help"),r.a.createElement(oe.a,{fluid:!0,styled:!0},r.a.createElement(oe.a.Title,{active:0===e,index:0,onClick:this.handleClick},r.a.createElement(E.a,{name:"dropdown"}),"What is a dog?"),r.a.createElement(oe.a.Content,{active:0===e},r.a.createElement("p",null,"A dog is a type of domesticated animal. Known for its loyalty and faithfulness, it can be found as a welcome guest in many households across the world.")),r.a.createElement(oe.a.Title,{active:1===e,index:1,onClick:this.handleClick},r.a.createElement(E.a,{name:"dropdown"}),"What kinds of dogs are there?"),r.a.createElement(oe.a.Content,{active:1===e},r.a.createElement("p",null,"There are many breeds of dogs. Each breed varies in size and temperament. Owners often select a breed of dog that they find to be compatible with their own lifestyle and desires from a companion.")),r.a.createElement(oe.a.Title,{active:2===e,index:2,onClick:this.handleClick},r.a.createElement(E.a,{name:"dropdown"}),"How do you acquire a dog?"),r.a.createElement(oe.a.Content,{active:2===e},r.a.createElement("p",null,"Three common ways for a prospective owner to acquire a dog is from pet shops, private owners, or shelters."),r.a.createElement("p",null,"A pet shop may be the most convenient way to buy a dog. Buying a dog from a private owner allows you to assess the pedigree and upbringing of your dog before choosing to take it home. Lastly, finding your dog from a shelter, helps give a good home to a dog who may not find one so readily."))))}}]),t}(n.Component),ie=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,products:[],filter:{type:null,value:null},cart:{}},a.getCart=function(){var e=localStorage.getItem("cart");if(e){var t=JSON.parse(e);a.setState({cart:t})}},a.clearCart=function(){a.setState({cart:{}})},a.getUser=function(){var e=localStorage.getItem("user");e&&fetch(O+"auto_signin",{headers:{Authorization:e}}).then(function(e){return e.json()}).then(function(e){e.error||a.setState({user:e.user})})},a.signOut=function(){a.setState({user:null},localStorage.removeItem("user"))},a.setSearch=function(e){a.setState({filter:{type:"search",value:e.target.value}})},a.setFilter=function(e,t){a.setState({filter:{type:e,value:t}})},a.addToCart=function(e){a.setState({cart:Object.assign({},a.state.cart,Object(i.a)({},e,a.state.cart[e]+1||1))},function(){return localStorage.setItem("cart",JSON.stringify(a.state.cart))})},a.removeFromCart=function(e){var t=Object(c.a)({},a.state.cart);a.state.cart[e]>1?t[e]=a.state.cart[e]-1:delete t[e],a.setState({cart:t},function(){return localStorage.setItem("cart",JSON.stringify(a.state.cart))})},a.removeLineFromCart=function(e){var t=Object(c.a)({},a.state.cart);delete t[e],a.setState({cart:t},function(){return localStorage.setItem("cart",JSON.stringify(a.state.cart))})},a.updateCart=function(e){console.log(e.target.name,e.target.value),a.setState({cart:Object.assign({},a.state.cart,Object(i.a)({},e.target.name,e.target.value))},function(){return localStorage.setItem("cart",JSON.stringify(a.state.cart))})},a.products=function(){var e=a.state,t=e.products,n=e.filter;switch(n.type){case"search":return t.filter(function(e){return e.brewery.name.toLowerCase().includes(n.value.toLowerCase())||e.description.toLowerCase().includes(n.value.toLowerCase())||e.name.toLowerCase().includes(n.value.toLowerCase())});case"all products":return t;case"brewery":return t.filter(function(e){return e.brewery.name===n.value});case"style":return t.filter(function(e){return e.style.includes(n.value)});default:return t}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getUser(),this.getCart(),fetch(O+"products").then(function(e){return e.json()}).then(function(t){var a=t.filter(function(e){return e.stock>0});e.setState({products:a})})}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{containerId:"messages",position:D.b.POSITION.BOTTOM_RIGHT}),r.a.createElement(v,{user:this.state.user,signOut:this.signOut,setSearch:this.setSearch,search:"search"===this.state.filter.type?this.state.filter.value:"",cart:this.state.cart}),this.state.user?r.a.createElement(C.a,{style:{paddingTop:"6em"}},r.a.createElement(R.a,{exact:!0,path:"/",render:function(){return r.a.createElement(F,{products:e.products(),filter:e.state.filter.value,setFilter:e.setFilter})}}),r.a.createElement(R.a,{exact:!0,path:"/profile",render:function(e){return r.a.createElement(z,e)}}),r.a.createElement(R.a,{exact:!0,path:"/orders",render:function(t){return r.a.createElement(le,Object.assign({},t,{user:e.state.user}))}}),r.a.createElement(R.a,{exact:!0,path:"/order/:id",render:function(e){return r.a.createElement(re,e)}}),r.a.createElement(R.a,{exact:!0,path:"/products",render:function(e){return r.a.createElement(q,e)}}),r.a.createElement(R.a,{exact:!0,path:"/product/:id",render:function(t){return r.a.createElement(B,Object.assign({},t,{products:e.state.products,addToCart:e.addToCart,cart:e.state.cart}))}}),r.a.createElement(R.a,{exact:!0,path:"/cart",render:function(t){return r.a.createElement(ee,Object.assign({},t,{user:e.state.user,cart:e.state.cart,products:e.products(),clearCart:e.clearCart,removeFromCart:e.removeFromCart,addToCart:e.addToCart,removeLineFromCart:e.removeLineFromCart}))}}),r.a.createElement(R.a,{exact:!0,path:"/help",render:function(e){return r.a.createElement(ce,e)}})):r.a.createElement(C.a,{style:{paddingTop:"6em"}},r.a.createElement(R.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(N,Object.assign({getUser:e.getUser},t))}}),r.a.createElement(R.a,{exact:!0,path:"/signin",render:function(t){return r.a.createElement(H,Object.assign({getUser:e.getUser},t))}}))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[406,1,2]]]);
//# sourceMappingURL=main.69db9821.chunk.js.map